---
layout: post
title: C#代码片段
date: 2024-02-20
tag: 工具
---

---

# 1、时间戳
```csharp
var ts = DateTime.UtcNow - new DateTime(1970, 1, 1, 0, 0, 0, 0);
long times = Convert.ToInt64(ts.TotalMilliseconds);
DateTime start = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
DateTime date = start.AddMilliseconds(times).ToLocalTime();
//时区转换
string ID = TimeZoneInfo.Local.Id;
DateTime startTime = TimeZoneInfo.ConvertTime(date, TimeZoneInfo.FindSystemTimeZoneById(ID));
string formattedDate = startTime.ToString("yyyy-MM-dd_HH_mm_ss.fff");
```

# 2、写文本
```csharp
string file_path = "";//要写入的路径
System.IO.StreamWriter m_loc_file = new System.IO.StreamWriter(file_path, true, Encoding.UTF8);
m_loc_file.WriteLine("Hello world!");
m_loc_file.Flush();
m_loc_file.Close();
```
